import pygame
import random

# הגדרות כלליות
WIDTH, HEIGHT = 800, 600
FPS = 60

# צבעים
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
RED = (255, 0, 0)
BLUE = (0, 0, 255)

# אתחול Pygame
pygame.init()
screen = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("Brawl Stars Basic")
clock = pygame.time.Clock()

# מחלקת שחקן
class Player(pygame.sprite.Sprite):
    def __init__(self, x, y, color):
        super().__init__()
        self.image = pygame.Surface((50, 50))
        self.image.fill(color)
        self.rect = self.image.get_rect(center=(x, y))
        self.speed = 5

    def update(self, keys, controls):
        if keys[controls['up']] and self.rect.top > 0:
            self.rect.y -= self.speed
        if keys[controls['down']] and self.rect.bottom < HEIGHT:
            self.rect.y += self.speed
        if keys[controls['left']] and self.rect.left > 0:
            self.rect.x -= self.speed
        if keys[controls['right']] and self.rect.right < WIDTH:
            self.rect.x += self.speed

# מחלקת קליע
class Bullet(pygame.sprite.Sprite):
    def __init__(self, x, y, direction, color):
        super().__init__()
        self.image = pygame.Surface((10, 10))
        self.image.fill(color)
        self.rect = self.image.get_rect(center=(x, y))
        self.speed = 10 * direction

    def update(self):
        self.rect.x += self.speed
        if self.rect.right < 0 or self.rect.left > WIDTH:
            self.kill()

# יצירת שחקנים
player1 = Player(100, HEIGHT // 2, RED)
player2 = Player(WIDTH - 100, HEIGHT // 2, BLUE)

players = pygame.sprite.Group(player1, player2)
bullets = pygame.sprite.Group()

# שליטה בשחקנים
controls_p1 = {'up': pygame.K_w, 'down': pygame.K_s, 'left': pygame.K_a, 'right': pygame.K_d, 'shoot': pygame.K_SPACE}
controls_p2 = {'up': pygame.K_UP, 'down': pygame.K_DOWN, 'left': pygame.K_LEFT, 'right': pygame.K_RIGHT, 'shoot': pygame.K_RETURN}

# לולאת המשחק
running = True
while running:
    clock.tick(FPS)
    screen.fill(WHITE)

    # אירועים
    keys = pygame.key.get_pressed()
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        # ירי קליעים
        if event.type == pygame.KEYDOWN:
            if event.key == controls_p1['shoot']:
                bullet = Bullet(player1.rect.centerx + 25, player1.rect.centery, 1, RED)
                bullets.add(bullet)
            if event.key == controls_p2['shoot']:
                bullet = Bullet(player2.rect.centerx - 25, player2.rect.centery, -1, BLUE)
                bullets.add(bullet)

    # עדכון
    players.update(keys, controls_p1)
    players.update(keys, controls_p2)
    bullets.update()

    # בדיקת פגיעות
    for bullet in bullets:
        if player1.rect.colliderect(bullet.rect) and bullet.speed < 0:
            print("Player 1 hit!")
            bullet.kill()
        if player2.rect.colliderect(bullet.rect) and bullet.speed > 0:
            print("Player 2 hit!")
            bullet.kill()

    # ציור למסך
    players.draw(screen)
    bullets.draw(screen)

    # עדכון תצוגה
    pygame.display.flip()

pygame.quit()
